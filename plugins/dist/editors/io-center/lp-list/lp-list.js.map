{"version":3,"file":"lp-list.js","sourceRoot":"","sources":["../../../../src/editors/io-center/lp-list/lp-list.ts"],"names":[],"mappings":"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","sourcesContent":["import {css, customElement, html, property, state} from \"lit-element\";\nimport {IoCenterFoundation} from \"../foundation\";\nimport {Subscription} from \"rxjs\";\n\nimport './lp-editor';\nimport '../components/forms/text-input';\n\nimport {ElementManagerService} from \"../element-manager/element-manager.service\";\nimport {DataObject} from \"../element-manager/data-object\";\nimport {LpDataService} from \"./lp-data.service\";\n\n@customElement('lp-list')\nexport class LpList extends IoCenterFoundation {\n  @property({type: String}) searchTerm: string = '';\n\n  @state() selectedItems: Set<DataObject> = new Set();\n  @state() lpItems: DataObject[] = [];\n\n  private subList: Subscription[] = [];\n\n  private elementManager = ElementManagerService.getInstance();\n  private lpDataService = LpDataService.getInstance();\n\n  constructor() {\n    super();\n    this.subList.push(this.lpDataService.lpData$.subscribe((dataObjects) => {\n      this.lpItems = dataObjects;\n      this.requestUpdate();\n    }));\n\n    this.subList.push(this.elementManager.dataObjectDeleted$.subscribe((dataObject: DataObject) => {\n      this.selectedItems.delete(dataObject);\n      this.requestUpdate();\n    }));\n\n    this.subList.push(this.elementManager.dataObjectAdded$.subscribe((dataObject: DataObject) => {\n      if (dataObject.type === 'LP') {\n        this.selectedItems.add(dataObject);\n        this.requestUpdate();\n      }\n    }));\n  }\n\n  disconnectedCallback() {\n    super.disconnectedCallback();\n    this.subList.forEach(sub => sub.unsubscribe());\n  }\n\n  _onSearchInput(event: Event) {\n    const input = event.target as HTMLInputElement;\n    this.searchTerm = input.value.toLowerCase();\n    this.requestUpdate();\n  }\n\n  handleItemClick(item: DataObject) {\n    if (this.selectedItems.has(item)) {\n      this.selectedItems.delete(item);\n      this.elementManager.deleteDataObjectById(item.id);\n    } else {\n      this.selectedItems.add(item);\n      this.elementManager.addDataObject(item);\n    }\n    this.requestUpdate();\n  }\n\n  clear() {\n    this.selectedItems.clear();\n    this.requestUpdate();\n  }\n\n  private renderList() {\n    // Filter lpItems based on the searchTerm\n    const filteredItems = this.lpItems.filter((item: DataObject) => {\n      const searchLower = this.searchTerm.toLowerCase();\n      return (\n        item.name.toLowerCase().includes(searchLower) ||\n        item.lnInst.toLowerCase().includes(searchLower)\n      );\n    });\n\n    if (filteredItems.length === 0) {\n      return html`<p>No items found</p>`;\n    }\n\n    return html`\n      <ul class=\"lp-list\">\n        ${filteredItems.map((item: DataObject) => html`\n          <li\n            class=\"lp-list-item ${this.selectedItems.has(item) ? 'selected' : ''}\"\n            @click=\"${() => this.handleItemClick(item)}\"\n          >\n            <mwc-icon>\n              ${this.selectedItems.has(item) ? 'check_circle' : 'link'}\n            </mwc-icon>\n            <span>${item.name}-${item.lnInst}</span>\n          </li>\n        `)}\n      </ul>\n    `;\n  }\n\n  private renderSearchInputField() {\n    return html`\n      <text-input\n        .placeholder=\"${'Search LP'}\"\n        .value=\"${this.searchTerm}\"\n        icon=\"search\"\n        @value-changed=${this._onSearchInput}\n      ></text-input>\n    `;\n  }\n\n  render() {\n    return html`\n      <div class=\"lp-list-container\">\n        <div class=\"lp-list-actions\">\n          ${this.renderSearchInputField()}\n        </div>\n        <div class=\"lp-list-content\">\n          ${this.renderList()}\n        </div>\n      </div>\n    `;\n  }\n\n  static styles = css`\n    .lp-list-container {\n      width: auto;\n      display: flex;\n      flex-direction: column;\n      height: calc(100vh - 250px);\n      border-left: 1px solid #e1e1e1;\n      background-color: #faf4e6;\n      align-items: center;\n      padding: 0.5rem 0.5rem;\n      overflow-y: auto;\n      overflow-x: hidden;\n    }\n\n    .lp-list-actions {\n      width: 100%;\n      display: flex;\n      justify-content: center;\n      margin-bottom: 0.5rem;\n    }\n\n    .lp-list-content {\n      width: 100%;\n      overflow-y: auto;\n      height: 100%;\n      padding: 0 0.5rem;\n    }\n\n    .lp-list {\n      width: 100%;\n      list-style-type: none;\n      padding: 0;\n      margin: 0;\n    }\n\n    .lp-list-item {\n      display: flex;\n      align-items: center;\n      justify-content: space-between;\n      padding: 10px 15px;\n      cursor: pointer;\n      background-color: #f8f6ee;\n      border: 1px solid #ccc;\n      border-radius: 8px;\n      margin-bottom: 8px;\n      font-family: 'Arial', sans-serif;\n      color: #333;\n      transition: background-color 0.2s ease, box-shadow 0.2s ease;\n    }\n\n    .lp-list-item:hover {\n      background-color: #f0e9d2;\n      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);\n    }\n\n    .lp-list-item.selected {\n      background-color: #c3dff0;\n      border-color: #a1c7e4;\n    }\n\n    mwc-icon {\n      font-size: 1rem;\n      margin-right: 8px;\n      color: #6b6b6b;\n    }\n\n    .lp-list-item span {\n      flex-grow: 1;\n      text-align: left;\n    }\n\n    ul {\n      padding: 0;\n      margin: 0;\n    }\n\n    li {\n      list-style: none;\n    }\n\n    text-input {\n      width: 100%;\n    }\n\n    .search-field {\n      background-color: white;\n      border-radius: 20px;\n      padding: 0 1rem;\n      font-size: 1rem;\n      border: 1px solid #ccc;\n      color: #333;\n      width: 100%;\n    }\n\n    .search-field::placeholder {\n      color: #888;\n    }\n  `;\n}\n"]}